<section class="upload-section" id="analyze-section">
  <div class="section-header">
    <div class="section-badge">AI Analysis Engine</div>
    <h2 class="section-title">Upload &amp; <span class="gradient-text">Analyze</span></h2>
    <p class="section-sub">Upload your photo and let our AI pipeline — powered by Gemini Vision, Groq LLaMA 3.3 70B, and Hugging Face — generate your personalized style profile.</p>
  </div>

  <div class="upload-layout">
    <!-- Left: Upload zone + options -->
    <div class="upload-zone-wrapper">
      <div class="upload-zone" id="uploadZone">
        <input type="file" id="imageInput" accept="image/*" hidden />
        <div class="upload-icon-wrap" id="uploadIconWrap">
          <div class="upload-icon-ring">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="1.5">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
          </div>
          <p class="upload-title">Drop your photo here</p>
          <p class="upload-sub">or <span class="upload-link" id="uploadTrigger">browse files</span></p>
          <p class="upload-hint">Supports JPG, PNG, WEBP · Max 10MB</p>
        </div>
        <div class="upload-preview-wrap" id="previewWrap" style="display:none;">
          <img id="previewImg" src="" alt="Preview" class="upload-preview-img" />
          <div class="preview-overlay"><div class="preview-scan-line"></div></div>
          <button class="remove-img-btn" id="removeImgBtn">✕ Remove</button>
        </div>
      </div>

      <div class="upload-options">
        <div class="option-row">
          <label class="option-label">Analysis Mode</label>
          <div class="option-tabs">
            <button class="opt-tab tab-active" data-mode="full">Full Analysis</button>
            <button class="opt-tab" data-mode="skin">Skin Tone</button>
            <button class="opt-tab" data-mode="style">Style Only</button>
          </div>
        </div>
        <div class="option-row">
          <label class="option-label">AI Model</label>
          <select class="option-select" id="modelSelect">
            <option value="groq">Groq LLaMA 3.3 70B</option>
            <option value="gemini">Google Gemini Vision</option>
            <option value="huggingface">Hugging Face</option>
          </select>
        </div>
        <div class="option-row">
          <label class="option-label">Style Preference</label>
          <select class="option-select" id="stylePreference">
            <option value="auto">Auto Detect</option>
            <option value="casual">Casual</option>
            <option value="formal">Formal / Business</option>
            <option value="streetwear">Streetwear</option>
            <option value="luxury">Luxury / High Fashion</option>
            <option value="minimalist">Minimalist</option>
          </select>
        </div>
      </div>

      <button class="btn-primary analyze-btn" id="analyzeBtn" data-ready="false" style="opacity:.45;cursor:not-allowed;">
        <span class="btn-glow"></span>
        <span id="analyzeBtnText">Analyze My Style</span>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
        </svg>
      </button>
    </div>

    <!-- Right: Processing + Results -->
    <div class="analysis-right">
      <!-- Idle state -->
      <div class="idle-panel" id="idlePanel">
        <div class="idle-orb">
          <div class="idle-ring ir1"></div>
          <div class="idle-ring ir2"></div>
          <div class="idle-core">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="1.5">
              <path d="M12 2a10 10 0 100 20A10 10 0 0012 2z"/>
              <path d="M12 8v4l3 3"/>
            </svg>
          </div>
        </div>
        <p class="idle-text">Upload an image to begin AI analysis</p>
        <div class="tech-stack-badges">
          <span class="tech-badge">Groq LLaMA 3.3</span>
          <span class="tech-badge">Gemini Vision</span>
          <span class="tech-badge">Hugging Face</span>
          <span class="tech-badge">FastAPI</span>
          <span class="tech-badge">OpenCV</span>
        </div>
      </div>

      <!-- Processing panel -->
      <div class="processing-panel" id="processingPanel" style="display:none;">
        <div class="proc-orb">
          <div class="proc-ring pr1"></div>
          <div class="proc-ring pr2"></div>
          <div class="proc-ring pr3"></div>
          <div class="proc-core"></div>
        </div>
        <p class="proc-title">Analyzing your style...</p>
        <div class="proc-steps" id="procSteps">
          <div class="proc-step" id="step1"><span class="step-dot"></span><span>Uploading image to FastAPI server...</span></div>
          <div class="proc-step" id="step2"><span class="step-dot"></span><span>Gemini Vision: Analyzing face features...</span></div>
          <div class="proc-step" id="step3"><span class="step-dot"></span><span>Hugging Face: Detecting skin tone via OpenCV...</span></div>
          <div class="proc-step" id="step4"><span class="step-dot"></span><span>Groq LLaMA 3.3 70B: Generating style profile...</span></div>
          <div class="proc-step" id="step5"><span class="step-dot"></span><span>Building personalized recommendations...</span></div>
        </div>
      </div>

      <!-- Results panel -->
      <div class="results-panel" id="resultsPanel" style="display:none;">
        <div class="results-header">
          <div class="results-badge">
            <span class="results-badge-dot"></span>Analysis Complete
          </div>
          <h3 class="results-title">Your AI Style Report</h3>
        </div>
        <div class="results-grid" id="resultsGrid">
          <!-- Populated dynamically by script.js -->
        </div>
        <div class="results-actions">
          <button class="btn-primary" onclick="document.getElementById('dashboard').scrollIntoView({behavior:'smooth'})">
            <span class="btn-glow"></span>View Full Dashboard
          </button>
          <button class="btn-ghost" id="reanalyzeBtn">Analyze Another</button>
        </div>
      </div>
    </div>
  </div>
</section>
